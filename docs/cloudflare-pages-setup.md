# ğŸŒŸ Cloudflare Pages åˆ›å»ºè¯¦ç»†æ­¥éª¤

## ğŸ“‹ å‰ææ¡ä»¶

- âœ… å·²å°†ä»£ç æ¨é€åˆ° GitHub
- âœ… GitHub ä»“åº“ï¼š`memos-cloudflare`
- âœ… æ‹¥æœ‰ Cloudflare è´¦å·

## ğŸš€ æ­¥éª¤ 1ï¼šç™»å½• Cloudflare Dashboard

1. è®¿é—®ï¼š**https://dash.cloudflare.com/**
2. ä½¿ç”¨æ‚¨çš„ Cloudflare è´¦å·ç™»å½•

## ğŸ“„ æ­¥éª¤ 2ï¼šè¿›å…¥ Pages æœåŠ¡

1. åœ¨å·¦ä¾§å¯¼èˆªæ ä¸­æ‰¾åˆ° **"Pages"**
2. ç‚¹å‡» **"Pages"** è¿›å…¥é¡µé¢
3. ç‚¹å‡» **"Create a project"** æŒ‰é’®

## ğŸ”— æ­¥éª¤ 3ï¼šè¿æ¥ GitHub ä»“åº“

1. é€‰æ‹© **"Connect to Git"**
2. é€‰æ‹© **"GitHub"** ä½œä¸º Git æä¾›å•†
3. å¦‚æœé¦–æ¬¡ä½¿ç”¨ï¼Œéœ€è¦æˆæƒ Cloudflare è®¿é—®æ‚¨çš„ GitHub
   - ç‚¹å‡» **"Connect GitHub"**
   - åœ¨å¼¹å‡ºçš„ GitHub æˆæƒé¡µé¢ä¸­ç‚¹å‡» **"Authorize"**
   - é€‰æ‹©è¦æˆæƒçš„ç»„ç»‡/è´¦æˆ·

## ğŸ“ æ­¥éª¤ 4ï¼šé€‰æ‹©ä»“åº“

1. åœ¨ä»“åº“åˆ—è¡¨ä¸­æ‰¾åˆ° **`memos-cloudflare`**
2. ç‚¹å‡»ä»“åº“åæ—è¾¹çš„ **"Begin setup"** æŒ‰é’®

## âš™ï¸ æ­¥éª¤ 5ï¼šé…ç½®é¡¹ç›®è®¾ç½®

### åŸºæœ¬è®¾ç½®ï¼š
- **Project name**: `memos-frontend` (æˆ–æ‚¨å–œæ¬¢çš„åç§°)
- **Production branch**: `main`

### æ„å»ºè®¾ç½®ï¼š
- **Framework preset**: é€‰æ‹© **"None"** æˆ– **"Vite"**
- **Build command**: 
  ```bash
  cd memos-main/web && pnpm install && pnpm build
  ```
- **Build output directory**: 
  ```
  memos-main/web/dist
  ```
- **Root directory (optional)**: ç•™ç©ºæˆ–å¡« `/`

### ç¯å¢ƒå˜é‡ï¼ˆæ„å»ºæ—¶ï¼‰ï¼š
ç‚¹å‡» **"Environment variables (advanced)"** å±•å¼€ï¼š

| Variable name | Value |
|---------------|-------|
| `NODE_ENV` | `production` |
| `VITE_API_BASE_URL` | `https://memos.yourdomain.com` (æ‚¨çš„ API åœ°å€) |

## ğŸš€ æ­¥éª¤ 6ï¼šå¼€å§‹éƒ¨ç½²

1. æ£€æŸ¥æ‰€æœ‰è®¾ç½®æ— è¯¯
2. ç‚¹å‡» **"Save and Deploy"** æŒ‰é’®
3. Cloudflare å°†å¼€å§‹æ„å»ºå’Œéƒ¨ç½²è¿‡ç¨‹

## ğŸ“Š æ­¥éª¤ 7ï¼šç›‘æ§éƒ¨ç½²çŠ¶æ€

1. æ‚¨å°†çœ‹åˆ°éƒ¨ç½²æ—¥å¿—å®æ—¶æ›´æ–°
2. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆé€šå¸¸éœ€è¦ 2-5 åˆ†é’Ÿï¼‰
3. çœ‹åˆ° **"Success!"** è¡¨ç¤ºéƒ¨ç½²æˆåŠŸ

## ğŸŒ æ­¥éª¤ 8ï¼šè·å–è®¿é—®åœ°å€

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å°†è·å¾—ï¼š
- **é¡µé¢ URL**: `https://memos-frontend.pages.dev`
- **è‡ªå®šä¹‰åŸŸå**: å¯åœ¨ç¨åé…ç½®

## ğŸ”§ æ­¥éª¤ 9ï¼šé…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡

1. åœ¨ Pages é¡¹ç›®è¯¦æƒ…é¡µé¢
2. ç‚¹å‡» **"Settings"** é€‰é¡¹å¡
3. é€‰æ‹© **"Environment variables"**
4. ç‚¹å‡» **"Add variable"** æ·»åŠ ï¼š

### ç”Ÿäº§ç¯å¢ƒå˜é‡ï¼š
| Variable name | Value | Environment |
|---------------|-------|-------------|
| `VITE_API_BASE_URL` | `https://api.memos.example.com` | `Production` |
| `NODE_ENV` | `production` | `Production` |

5. ç‚¹å‡» **"Save"**

## ğŸ“ æ­¥éª¤ 10ï¼šé…ç½®è·¯ç”±è§„åˆ™

1. åœ¨é¡¹ç›®æ ¹ç›®å½•ç¡®ä¿æœ‰ `memos-main/web/_routes.json` æ–‡ä»¶ï¼š
```json
{
  "version": 1,
  "include": ["/*"],
  "exclude": ["/api/*"]
}
```

2. å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨ Pages è®¾ç½®ä¸­é…ç½®é‡å®šå‘è§„åˆ™

## ğŸŒ æ­¥éª¤ 11ï¼šé…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

1. åœ¨ Pages é¡¹ç›®é¡µé¢ï¼Œç‚¹å‡» **"Custom domains"**
2. ç‚¹å‡» **"Set up a custom domain"**
3. è¾“å…¥æ‚¨çš„åŸŸåï¼š`memos.example.com`
4. æ ¹æ®æç¤ºé…ç½® DNS è®°å½•ï¼š
   - æ·»åŠ  CNAME è®°å½•ï¼š`memos.example.com` â†’ `memos-frontend.pages.dev`
5. ç­‰å¾… DNS ä¼ æ’­ï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ï¼‰

## ğŸ”„ æ­¥éª¤ 12ï¼šè§¦å‘é‡æ–°éƒ¨ç½²

å¦‚æœéœ€è¦é‡æ–°éƒ¨ç½²ï¼š
1. åœ¨ Pages é¡¹ç›®é¡µé¢
2. ç‚¹å‡» **"Deployments"** é€‰é¡¹å¡
3. ç‚¹å‡» **"Retry deployment"** æˆ–æ¨é€æ–°ä»£ç åˆ° GitHub

## âœ… éªŒè¯éƒ¨ç½²

è®¿é—®æ‚¨çš„ Pages åœ°å€ï¼Œæ£€æŸ¥ï¼š
- âœ… å‰ç«¯é¡µé¢æ­£å¸¸åŠ è½½
- âœ… å¯ä»¥è®¿é—®ç™»å½•é¡µé¢
- âœ… API è¯·æ±‚æŒ‡å‘æ­£ç¡®çš„åç«¯åœ°å€

## ğŸ” å¸¸è§é—®é¢˜è§£å†³

### æ„å»ºå¤±è´¥
- æ£€æŸ¥æ„å»ºå‘½ä»¤æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ `memos-main/web` ç›®å½•å­˜åœ¨
- æŸ¥çœ‹æ„å»ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### é¡µé¢ 404
- æ£€æŸ¥ `_routes.json` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- ç¡®è®¤æ„å»ºè¾“å‡ºç›®å½•è®¾ç½®æ­£ç¡®

### API æ— æ³•è®¿é—®
- æ£€æŸ¥ `VITE_API_BASE_URL` ç¯å¢ƒå˜é‡
- ç¡®è®¤åç«¯ Workers å·²éƒ¨ç½²
- æ£€æŸ¥ CORS é…ç½®

## ğŸ‰ å®Œæˆï¼

ç°åœ¨æ‚¨çš„å‰ç«¯å·²ç»æˆåŠŸéƒ¨ç½²åˆ° Cloudflare Pagesï¼

**è®¿é—®åœ°å€ï¼š**
- **ä¸´æ—¶åœ°å€**: `https://æ‚¨çš„é¡¹ç›®å.pages.dev`
- **è‡ªå®šä¹‰åŸŸå**: `https://memos.example.com` (å¦‚æœå·²é…ç½®)

## ğŸ“‹ ä¸‹ä¸€æ­¥

1. éƒ¨ç½²åç«¯ Workers
2. é…ç½® D1 æ•°æ®åº“
3. è®¾ç½® R2 æ–‡ä»¶å­˜å‚¨
4. æµ‹è¯•å®Œæ•´åŠŸèƒ½

---

**ğŸš€ äº«å—æ‚¨çš„ Cloudflare Pages éƒ¨ç½²ï¼** 